# API Reference

Complete API reference for React Peel components, hooks, and utilities.

## Components

### PeelWrapper

The main container component that manages the peel effect.

```tsx
import { PeelWrapper, PeelTop, PeelBack, PeelBottom } from "react-peel";

<PeelWrapper height={200} width={200} drag>
  <PeelTop />
  <PeelBack />
  <PeelBottom />
</PeelWrapper>
```

#### Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `ref` | `RefObject<PeelRef>` | - | Reference to access peel instance methods |
| `className` | `string` | - | CSS class for the container |
| `height` | `string \| number` | `"100%"` | Height of the peel container |
| `width` | `string \| number` | `"100%"` | Width of the peel container |
| `preset` | `PresetName` | - | Apply a preset configuration |
| `corner` | `CornerValue` | `"BOTTOM_RIGHT"` | Corner to peel from |
| `peelPosition` | `{ x: number; y: number }` | - | Current peel position |
| `constraints` | `ConstraintValue` | - | Constraints limiting peel distance |
| `mode` | `"book" \| "calendar"` | - | Predefined constraint modes |
| `drag` | `boolean` | `false` | Enable drag interaction |
| `disabled` | `boolean` | `false` | Disable all interactions |
| `fadeThreshold` | `number` | - | Threshold (0-1) to fade out top layer |
| `peelPath` | `number[]` | - | Path for peel animation |
| `timeAlongPath` | `number` | - | Position (0-1) along the path |
| `options` | `PeelOptions` | - | Additional peel.js options |
| `containerProps` | `HTMLDivAttributes` | - | Props for container div |

#### Event Callbacks

| Prop | Type | Description |
|------|------|-------------|
| `handleDrag` | `(event, x, y, peel) => void` | Called during drag |
| `handlePress` | `(event, peel) => void` | Called on click/tap |
| `onPeelStart` | `(peel) => void` | Called when peeling starts |
| `onPeelEnd` | `(peel) => void` | Called when peeling ends |
| `onPeelProgress` | `(progress, peel) => void` | Called with progress (0-1) |

### PeelTop, PeelBack, PeelBottom

Layer components that define the peel content.

```tsx
<PeelTop style={{ backgroundColor: "#81afcb" }}>
  Content on top
</PeelTop>
```

All three components accept standard HTML div props.

---

## Hooks

### usePeel

Hook for programmatic control of peel effects.

```tsx
import { usePeel } from "react-peel";

const { peelRef, animate, reset, setPosition, getProgress, stop, isAnimating } = usePeel();
```

#### Returns

| Property | Type | Description |
|----------|------|-------------|
| `peelRef` | `MutableRefObject<any>` | Attach to PeelWrapper ref |
| `animate` | `(options) => Promise<void>` | Animate peel to position |
| `reset` | `() => void` | Reset to corner position |
| `setPosition` | `(x, y) => void` | Set position immediately |
| `getProgress` | `() => number` | Get clipped area ratio |
| `stop` | `() => void` | Stop current animation |
| `isAnimating` | `() => boolean` | Check if animating |

#### Animate Options

```tsx
await animate({
  to: { x: 100, y: 100 },        // Required: target position
  from: { x: 200, y: 200 },      // Optional: start position
  duration: 500,                  // Optional: duration in ms
  easing: "easeOut",             // Optional: easing function
  onStart: () => {},             // Optional: start callback
  onEnd: () => {},               // Optional: end callback
  onProgress: (progress) => {},  // Optional: progress callback
});
```

---

## Presets

Pre-configured effects for common use cases.

```tsx
import { presets, getPreset } from "react-peel";

// Use with PeelWrapper
<PeelWrapper preset="stickyNote" />

// Get preset configuration
const preset = getPreset("stickyNote");
```

### Available Presets

| Name | Description |
|------|-------------|
| `stickyNote` | Small corner curl for sticky notes |
| `pageFlip` | Book-like page turn with spine constraint |
| `revealCard` | Scratch-off style reveal |
| `calendar` | Top-edge constrained calendar flip |
| `envelope` | Envelope flap opening |
| `giftCard` | Dramatic reveal with reflection |
| `photoAlbum` | Smooth page turn for photos |
| `scratchCard` | Lottery ticket scratch-off |

---

## Animations

Animation utilities for custom effects.

### easings

Built-in easing functions.

```tsx
import { easings } from "react-peel";

// Available: linear, easeIn, easeOut, easeInOut, 
//           easeInQuad, easeOutQuad, easeInOutQuad,
//           easeInExpo, easeOutExpo, spring, bounce, backOut
const value = easings.easeOut(0.5); // 0.75
```

### animate

Low-level animation helper.

```tsx
import { animate } from "react-peel";

const { stop, finished } = animate({
  from: 0,
  to: 100,
  duration: 500,
  easing: "easeOut",
  onUpdate: (value) => console.log(value),
  onComplete: () => console.log("Done!"),
});

await finished;
```

### animatePeelPosition

Animate peel instance position.

```tsx
import { animatePeelPosition } from "react-peel";

const controller = animatePeelPosition({
  peel: peelRef.current,
  from: { x: 200, y: 200 },
  to: { x: 50, y: 50 },
  duration: 600,
  easing: "easeInOut",
});
```

### loopPeel

Create looping peel animation.

```tsx
import { loopPeel } from "react-peel";

const stop = loopPeel({
  peel: peelRef.current,
  path: [200, 200, -200, -200],
  duration: 1000,
  pingPong: true,
});

// Later: stop the loop
stop();
```

### peelHint

Draw attention to peel corner.

```tsx
import { peelHint } from "react-peel";

await peelHint(peelRef.current, {
  peekSize: 30,
  duration: 300,
  repeat: 2,
});
```

---

## Types

All types are exported for TypeScript users:

```tsx
import type {
  PeelWrapperProps,
  PeelLayerProps,
  PeelRef,
  PeelOptions,
  TCoords,
  CornerName,
  CornerValue,
  ConstraintValue,
  PresetName,
  PeelPreset,
  EasingName,
  EasingFunction,
  AnimationController,
} from "react-peel";
```

---

## Corner Values

Corners can be specified as names or coordinates:

```tsx
// By name
corner="BOTTOM_RIGHT"
corner="TOP_LEFT"
corner="TOP_RIGHT"
corner="BOTTOM_LEFT"

// By coordinates
corner={{ x: 200, y: 200 }}
```

---

## PeelOptions

Options passed to the underlying peel.js instance:

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `topShadow` | `boolean` | `true` | Enable top layer shadow |
| `topShadowBlur` | `number` | `5` | Shadow blur radius |
| `topShadowAlpha` | `number` | `0.5` | Shadow opacity |
| `backReflection` | `boolean` | `false` | Enable back reflection |
| `backReflectionAlpha` | `number` | `0.15` | Reflection opacity |
| `backShadow` | `boolean` | `true` | Enable back shadow |
| `backShadowSize` | `number` | `0.04` | Shadow size |
| `bottomShadow` | `boolean` | `true` | Enable bottom shadow |
| `shape` | `SvgElementProps` | - | Custom SVG shape |

See the [original peel.js documentation](https://andrewplummer.github.io/peel-js/#options) for complete options.
